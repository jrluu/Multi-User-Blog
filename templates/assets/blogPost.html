{% extends "base.html" %}

{% block content %}

  <section class = "row">

    <div class="col-md-12">
      <h2> {{blog_query.title}} </h1>
    </div>

    <div class="col-md-12">
      <p> {{blog_query.author}}, {{blog_query.created.strftime('%b %d, %Y')}}, Post Points: {{blog_query.likes}} </p>
    </div>

    <div class="col-md-12">
      <h3> {{blog_query.content}} </h3>
    </div>

    <div class="col-md-12">

      {% if user == blog_query.author %}
        <a href="editPost?blog_post_id={{blog_query.key.id()}}">
          <button type="button" class="btn btn-default btn-md">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true" ></span>
          </button>
        </a>

        <a href="deletePost?blog_post_id={{blog_query.key.id()}}">
          <button type="button" class="btn btn-default btn-md">
            <span class="glyphicon glyphicon-trash" aria-hidden="true" ></span>
          </button>
        </a>
      {% else %}
        <a href="vote?blog_post_id={{blog_query.key.id()}}&value=1">
          <button type="button" class="btn btn-default btn-md">
            <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true" ></span>
          </button>
        </a>

        <a href="vote?blog_post_id={{blog_query.key.id()}}&value=-1">
          <button type="button" class="btn btn-default btn-md">
            <span class="glyphicon glyphicon-thumbs-down" aria-hidden="true" ></span>
          </button>
        </a>
      {% endif %}
      <br>
      <br>
      <br>

    </div>

  </section>


  <section class="row">
    <div class="col-md-12">
      <form method="post">

        <div class="form-group">
          <label for="content"> Post comment: </label>
          <textarea name="content" class="form-control" required=true rows="5"></textarea>
        </div>

        <button type="submit" class="btn btn-default"> Submit </button>

      </form>

      <br>

    </div>
  </section>



  <section class="row">

    <div class="col-md-12">
      <h1> Latest Comments</h1>
    </div>
    {% for comment in comments %}

      <div class="col-md-12">

        <h4> {{comment.content}}</h3>
        <p> ---- {{comment.author}}, {{comment.created.strftime('%b %d, %Y')}}, Comment Points: {{comment.likes}} </p>

        {% if user == comment.author %}
          <a href="editPost?blog_post_id={{comment.key.id()}}&parent={{blog_query.key.id()}}">
            <button type="button" class="btn btn-default btn-sm">
              <span class="glyphicon glyphicon-pencil" aria-hidden="true" ></span>
            </button>
          </a>

          <a href="deletePost?blog_post_id={{comment.key.id()}}&parent={{blog_query.key.id()}}">

            <button type="button" class="btn btn-default btn-sm">
              <span class="glyphicon glyphicon-trash" aria-hidden="true" ></span>
            </button>
          </a>
        {% else %}
          <a href="vote?blog_post_id={{comment.key.id()}}&parent={{blog_query.key.id()}}&value=1">
            <button type="button" class="btn btn-default btn-sm">
              <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true" ></span>
            </button>
          </a>

          <a href="vote?blog_post_id={{comment.key.id()}}&parent={{blog_query.key.id()}}&value=-1">
            <button type="button" class="btn btn-default btn-sm">
              <span class="glyphicon glyphicon-thumbs-down" aria-hidden="true" ></span>
            </button>
          </a>
        {% endif %}
        <br>
        <br>

      </div>
    {% endfor %}

  </section>
{% endblock %}
